<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Main Menu</title>
  <style>
    @font-face {
      font-family: 'beckett';
      src: url('./beckett.ttf') format('truetype');
    }
    @font-face {
      font-family: 'bankgothic';
      src: url('./bankgothic-regular.ttf') format('truetype');
    }

    :root {
      --menu-color-default: rgb(120,145,190);
      --menu-color-active: rgb(163,196,239);
    }

    body {
      margin: 0;
      background: #000;
      min-height: 100vh;
      font-family: 'bankgothic', sans-serif;
      overflow: hidden;
    }

    #title {
      position: absolute;
      top: 20px;
      left: 20px;
      font-family: 'beckett', serif;
      font-size: clamp(36px, 6vw, 60px);
      color: var(--menu-color-active);
      text-shadow: 2px 2px 4px #000;
      white-space: nowrap;
    }

    #cornerLogo.back8 { position: absolute; top: 0; right: 0; height: 100px; width: auto; }
    #cornerLogo.back3 { position: absolute; top: 0; right: 0; height: 200px; width: auto; }
    #cornerLogo.back6 { position: absolute; top: 0; right: 0; height: 150px; width: auto; }

    .menu {
      position: absolute;
      top: 55%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: clamp(22px, 4vw, 32px);
      font-weight: bold;
      text-transform: uppercase;
      line-height: 2.2em;
      white-space: nowrap;
      display: none;
    }
    .menu.active { display: block; }

    .menu-item {
      position: relative;
      cursor: pointer;
      color: var(--menu-color-default);
      transition: color 0.2s;
      user-select: none;
      text-align: center;
      padding-left: 30px;
    }
    .menu-item.active { color: var(--menu-color-active); }

    #mainMenu .menu-item img.arrow {
      display: none;
      position: absolute;
      left: -10px;
      top: 85%;
      transform: translateY(-50%);
      height: 70px;
      width: auto;
    }
    #mainMenu .menu-item.active img.arrow { display: inline-block; }

    #mainMenu .menu-item img.arrow.arrow-options { left: 20px; top: 90%; height: 70px; }
    #mainMenu .menu-item img.arrow.arrow-credits { left: 25px; top: 90%; height: 70px; }

    #toolsMenu {
      position: absolute;
      top: 50%;
      left: 40%;
      transform: translate(-50%, -50%);
      text-align: left;
      font-size: clamp(20px, 3vw, 28px);
      line-height: 2.2em;
    }
    #toolsMenu .menu-item img.arrow {
      display: none;
      position: absolute;
      left: -10px;
      top: 90%;
      transform: translateY(-50%);
      height: 70px;
      width: auto;
    }
    #toolsMenu .menu-item.active img.arrow { display: inline-block; }

    #optionsMenu {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: left;
      font-size: clamp(20px, 3vw, 28px);
      line-height: 2.2em;
    }
    #optionsMenu .menu-item img.arrow {
      display: none;
      position: absolute;
      left: -10px;
      top: 90%;
      transform: translateY(-50%);
      height: 70px;
      width: auto;
    }
    #optionsMenu .menu-item.active img.arrow { display: inline-block; }

    .option-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      min-width: 300px;
      position: relative;
    }
    .toggle {
      cursor: pointer;
      color: var(--menu-color-default);
    }
    .toggle.active { color: var(--menu-color-active); }

    .volume-bar {
      display: flex;
      gap: 2px;
      cursor: pointer;
    }
    .volume-bar .level {
      width: 12px;
      height: 20px;
      background: var(--menu-color-default);
      transition: background 0.2s;
    }
    .volume-bar .level.active { background: var(--menu-color-active); }

    #toolsBack, #optionsBack {
      position: absolute;
      bottom: 100px;
      right: 40px;
      font-size: clamp(20px, 3vw, 28px);
      cursor: pointer;
      text-transform: uppercase;
      color: var(--menu-color-default);
      transition: color 0.2s;
      display: none;
      padding-left: 30px;
    }
    #toolsBack.active, #optionsBack.active { color: var(--menu-color-active); }

    #toolsBack::before, #optionsBack::before {
      content: url("arrow.png");
      display: none;
      position: absolute;
      left: -10px;
      top: 110%;
      transform: translateY(-50%);
      height: 70px;
    }
    #toolsBack.active::before, #optionsBack.active::before { display: inline-block; }

    @media screen and (orientation: landscape) {
      #title { font-size: clamp(22px, 3vw, 32px); }
    }
  </style>
</head>
<body>
  <div id="title">Main Menu</div>
  <img src="back8.png" id="cornerLogo" class="back8" alt="Logo" />

  <div id="mainMenu" class="menu active">
    <div class="menu-item" onclick="openTools()"><img src="arrow.png" class="arrow" alt=">"> Select Tools</div>
    <div class="menu-item" onclick="openOptions()"><img src="arrow.png" class="arrow arrow-options" alt=">"> Options</div>
    <div class="menu-item"><img src="arrow.png" class="arrow arrow-credits" alt=">"> Credits</div>
  </div>

  <div id="toolsMenu" class="menu">
    <div class="menu-item" onclick="openTransparanImage()"><img src="arrow.png" class="arrow" alt=">"> Transparan Image</div>
    <div class="menu-item" onclick="openCrashlog()"><img src="arrow.png" class="arrow" alt=">"> Crashlog Reader</div>
  </div>
  <div id="toolsBack" onclick="backToMain()">Back</div>

  <div id="optionsMenu" class="menu">
    <div class="menu-item option-row" id="audioRow">
      <img src="arrow.png" class="arrow" alt=">">
      <span>Audio</span>
      <span class="toggle" id="audioToggle">On</span>
    </div>
    <div class="menu-item option-row" id="volumeRow">
      <img src="arrow.png" class="arrow" alt=">">
      <span>Volume</span>
      <span class="volume-bar" id="volumeBar">
        <span class="level active"></span>
        <span class="level"></span>
        <span class="level"></span>
        <span class="level"></span>
        <span class="level"></span>
        <span class="level"></span>
        <span class="level"></span>
        <span class="level"></span>
      </span>
    </div>
  </div>
  <div id="optionsBack" onclick="backToMain()">Back</div>

  <script>
    const menus = {
      main: document.getElementById('mainMenu'),
      tools: document.getElementById('toolsMenu'),
      options: document.getElementById('optionsMenu')
    };

    const title = document.getElementById('title');
    const cornerLogo = document.getElementById('cornerLogo');
    const toolsBack = document.getElementById('toolsBack');
    const optionsBack = document.getElementById('optionsBack');

    const selectSound = new Audio("select.mp3");
    const backSound   = new Audio("back.mp3");
    function playSelect(){ try{ selectSound.currentTime=0; selectSound.play(); }catch(_){} }
    function playBack(){ try{ backSound.currentTime=0; backSound.play(); }catch(_){} }

    // === Audio Toggle ===
    const audioRow = document.getElementById("audioRow");
    const audioToggle = document.getElementById("audioToggle");
    audioRow.addEventListener("click", () => {
      const enabled = audioToggle.textContent === "On";
      audioToggle.textContent = enabled ? "Off" : "On";
      audioToggle.classList.toggle("active");
      localStorage.setItem("audioEnabled", !enabled);
      document.querySelectorAll('.menu-item, #toolsBack, #optionsBack').forEach(i => i.classList.remove('active'));
      audioRow.classList.add('active');
      playSelect();
    });

    // === Volume Bar ===
    const volumeRow = document.getElementById("volumeRow");
    const volumeBar = document.getElementById("volumeBar");
    const levels = [...volumeBar.querySelectorAll(".level")];

    function setVolumeFromIndex(index) {
      levels.forEach((lvl, i) => {
        lvl.classList.toggle("active", i <= index);
      });
      const volume = (index + 1) / levels.length;
      localStorage.setItem("audioVolume", volume);
      document.querySelectorAll('.menu-item, #toolsBack, #optionsBack').forEach(i => i.classList.remove('active'));
      volumeRow.classList.add('active');
    }

    levels.forEach((lvl, i) => {
      lvl.addEventListener("click", () => { setVolumeFromIndex(i); playSelect(); });
    });

    let isDragging = false;
    function updateVolumeFromEvent(e) {
      const rect = volumeBar.getBoundingClientRect();
      const x = (e.touches ? e.touches[0].clientX : e.clientX) - rect.left;
      let index = Math.floor((x / rect.width) * levels.length);
      index = Math.max(0, Math.min(index, levels.length - 1));
      setVolumeFromIndex(index);
    }

    volumeBar.addEventListener("mousedown", e => { isDragging = true; playSelect(); updateVolumeFromEvent(e); });
    window.addEventListener("mousemove", e => { if (isDragging) updateVolumeFromEvent(e); });
    window.addEventListener("mouseup", () => { isDragging = false; });

    volumeBar.addEventListener("touchstart", e => { isDragging = true; playSelect(); updateVolumeFromEvent(e); });
    window.addEventListener("touchmove", e => { if (isDragging) updateVolumeFromEvent(e); });
    window.addEventListener("touchend", () => { isDragging = false; });

    function openTools() {
      menus.main.classList.remove('active');
      menus.tools.classList.add('active');
      toolsBack.style.display = 'block';
      optionsBack.style.display = 'none';
      title.textContent = "Tools";
      cornerLogo.src = "back3.png";
      cornerLogo.className = "back3";
      document.querySelectorAll('.menu-item, #toolsBack').forEach(i => i.classList.remove('active'));
      toolsBack.classList.add('active');
      playSelect();
    }

    function openOptions() {
      menus.main.classList.remove('active');
      menus.options.classList.add('active');
      optionsBack.style.display = 'block';
      toolsBack.style.display = 'none';
      title.textContent = "Options";
      cornerLogo.src = "back6.png";
      cornerLogo.className = "back6";
      document.querySelectorAll('.menu-item, #optionsBack').forEach(i => i.classList.remove('active'));
      optionsBack.classList.add('active');
      playSelect();
    }

    function backToMain() {
      menus.tools.classList.remove('active');
      menus.options.classList.remove('active');
      menus.main.classList.add('active');
      toolsBack.style.display = 'none';
      optionsBack.style.display = 'none';
      title.textContent = "Main Menu";
      cornerLogo.src = "back8.png";
      cornerLogo.className = "back8";
      const first = menus.main.querySelector('.menu-item');
      if (first) {
        document.querySelectorAll('.menu-item, #toolsBack, #optionsBack').forEach(i => i.classList.remove('active'));
        first.classList.add('active');
      }
      playBack();
    }

    function openCrashlog() { playSelect(); window.location.href = "crashlog.html"; }
    function openTransparanImage() { playSelect(); window.location.href = "transparant image.html"; }

    document.querySelectorAll('.menu-item, #toolsBack, #optionsBack').forEach(item => {
      item.addEventListener('click', () => {
        document.querySelectorAll('.menu-item, #toolsBack, #optionsBack').forEach(i => i.classList.remove('active'));
        item.classList.add('active');
        if (item.id === "toolsBack" || item.id === "optionsBack") {
          playBack();
        } else {
          playSelect();
        }
      });
    });

    backToMain();
  </script>
</body>
</html>